{"ast":null,"code":"var _jsxFileName = \"C:\\\\tagger\\\\client\\\\src\\\\components\\\\UploadPage.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useState, useCallback, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useDropzone } from 'react-dropzone';\nimport { toast } from 'react-toastify';\nimport { AppContext } from '../App';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UploadPage = () => {\n  _s();\n  const {\n    sessionId,\n    setSessionId,\n    apiKey,\n    setApiKey,\n    globalTags,\n    setGlobalTags,\n    uploadedFiles,\n    setUploadedFiles,\n    setProcessingStatus\n  } = useContext(AppContext);\n  const [isUploading, setIsUploading] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [folderMode, setFolderMode] = useState(false);\n  const navigate = useNavigate();\n\n  // Handle file drop\n  const onDrop = useCallback(async acceptedFiles => {\n    if (acceptedFiles.length === 0) return;\n    setIsUploading(true);\n    setUploadProgress(0);\n    try {\n      var _data$files;\n      // Create FormData object\n      const formData = new FormData();\n\n      // Add files to FormData\n      if (folderMode) {\n        acceptedFiles.forEach(file => {\n          // Preserve folder structure in file names\n          formData.append('images', file, file.path || file.name);\n        });\n      } else {\n        acceptedFiles.forEach(file => {\n          formData.append('images', file);\n        });\n      }\n\n      // Set up headers\n      const headers = {};\n      if (sessionId) {\n        headers['X-Session-ID'] = sessionId;\n      }\n\n      // Upload files\n      const response = await fetch(`/api/upload/${folderMode ? 'folder' : 'multiple'}`, {\n        method: 'POST',\n        headers,\n        body: formData\n      });\n      if (!response.ok) {\n        throw new Error(`Upload failed: ${response.statusText}`);\n      }\n      const data = await response.json();\n\n      // Update session ID if not set\n      if (!sessionId) {\n        setSessionId(data.sessionId);\n      }\n\n      // Update uploaded files\n      setUploadedFiles(prev => [...prev, ...(data.files || []).map(file => ({\n        name: file.originalname,\n        path: file.path,\n        size: file.size,\n        type: file.mimetype\n      }))]);\n      toast.success(`Successfully uploaded ${((_data$files = data.files) === null || _data$files === void 0 ? void 0 : _data$files.length) || 0} files`);\n    } catch (error) {\n      console.error('Error uploading files:', error);\n      toast.error(`Upload failed: ${error.message}`);\n    } finally {\n      setIsUploading(false);\n      setUploadProgress(100);\n    }\n  }, [sessionId, setSessionId, setUploadedFiles, folderMode]);\n\n  // Configure dropzone\n  const {\n    getRootProps,\n    getInputProps,\n    isDragActive\n  } = useDropzone({\n    onDrop,\n    accept: {\n      'image/*': ['.jpg', '.jpeg', '.png', '.gif', '.webp', '.bmp']\n    },\n    multiple: true,\n    noClick: isUploading,\n    noDrag: isUploading,\n    noKeyboard: isUploading,\n    useFsAccessApi: true,\n    webkitDirectory: folderMode,\n    preventDropOnDocument: true\n  });\n\n  // Handle API key change\n  const handleApiKeyChange = e => {\n    setApiKey(e.target.value);\n  };\n\n  // Handle global tags change\n  const handleGlobalTagsChange = e => {\n    setGlobalTags(e.target.value);\n  };\n\n  // Start processing\n  const handleStartProcessing = () => {\n    if (!apiKey) {\n      toast.error('Please enter your OpenAI API key');\n      return;\n    }\n    if (uploadedFiles.length === 0) {\n      toast.error('Please upload at least one image');\n      return;\n    }\n\n    // Set processing status\n    setProcessingStatus({\n      isProcessing: true,\n      progress: 0,\n      totalFiles: uploadedFiles.length,\n      processedFiles: 0,\n      errors: []\n    });\n\n    // Navigate to processing page\n    navigate('/processing');\n  };\n\n  // Toggle folder mode\n  const toggleFolderMode = () => {\n    setFolderMode(!folderMode);\n  };\n\n  // Reset upload progress after completion\n  useEffect(() => {\n    if (uploadProgress === 100) {\n      const timer = setTimeout(() => {\n        setUploadProgress(0);\n      }, 1000);\n      return () => clearTimeout(timer);\n    }\n  }, [uploadProgress]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-4xl mx-auto\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-2xl font-bold text-gray-800 mb-6\",\n      children: \"Upload Images for Caption Generation\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"apiKey\",\n        className: \"block text-sm font-medium text-gray-700 mb-1\",\n        children: [\"OpenAI API Key \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-red-500\",\n          children: \"*\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 26\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        id: \"apiKey\",\n        value: apiKey,\n        onChange: handleApiKeyChange,\n        placeholder: \"sk-...\",\n        className: \"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-1 text-sm text-gray-500\",\n        children: \"Your API key is stored locally and never sent to our servers except when processing images.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"globalTags\",\n        className: \"block text-sm font-medium text-gray-700 mb-1\",\n        children: \"Global Tags (Optional)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"globalTags\",\n        value: globalTags,\n        onChange: handleGlobalTagsChange,\n        placeholder: \"high quality, detailed, best quality\",\n        className: \"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-1 text-sm text-gray-500\",\n        children: \"These tags will be added to all generated captions.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-6 flex items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: toggleFolderMode,\n        className: `px-4 py-2 rounded-md mr-2 ${!folderMode ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-700'}`,\n        disabled: isUploading || uploadedFiles.length > 0,\n        children: \"Upload Files\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: toggleFolderMode,\n        className: `px-4 py-2 rounded-md ${folderMode ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-700'}`,\n        disabled: isUploading || uploadedFiles.length > 0,\n        children: \"Upload Folder\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"ml-2 text-sm text-gray-500\",\n        children: folderMode ? 'Folder structure will be preserved' : 'Upload individual files'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ...getRootProps(),\n      className: `dropzone mb-6 ${isDragActive ? 'active' : ''} ${isUploading ? 'opacity-50 cursor-not-allowed' : ''}`,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        ...getInputProps()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }, this), isUploading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"spinner mx-auto mb-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Uploading files... \", uploadProgress, \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 11\n      }, this) : isDragActive ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          className: \"h-12 w-12 text-blue-500 mx-auto mb-4\",\n          fill: \"none\",\n          viewBox: \"0 0 24 24\",\n          stroke: \"currentColor\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            strokeWidth: 2,\n            d: \"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-lg font-medium text-blue-600\",\n          children: \"Drop the files here...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          className: \"h-12 w-12 text-gray-400 mx-auto mb-4\",\n          fill: \"none\",\n          viewBox: \"0 0 24 24\",\n          stroke: \"currentColor\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            strokeWidth: 2,\n            d: \"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-lg font-medium text-gray-700\",\n          children: folderMode ? 'Click to select a folder or drag it here' : 'Click to select files or drag them here'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-500 mt-1\",\n          children: \"Supported formats: JPG, PNG, GIF, WebP, BMP\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 7\n    }, this), uploadedFiles.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-lg font-medium text-gray-800 mb-2\",\n        children: [\"Uploaded Files (\", uploadedFiles.length, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 11\n      }, this), uploadedFiles.length <= 10 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"image-grid\",\n        children: uploadedFiles.slice(0, 10).map((file, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"border border-gray-200 rounded-md overflow-hidden\",\n          children: [file.type.startsWith('image/') ? /*#__PURE__*/_jsxDEV(\"img\", {\n            src: file.path.startsWith('http') ? file.path : URL.createObjectURL(file),\n            alt: file.name,\n            className: \"w-full h-32 object-cover\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 21\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-full h-32 bg-gray-100 flex items-center justify-center\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-500\",\n              children: file.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 23\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-2 text-xs truncate\",\n            title: file.name,\n            children: file.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 19\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gray-50 p-4 rounded-md\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [uploadedFiles.length, \" files uploaded\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-500\",\n          children: \"Showing preview for large uploads is disabled to improve performance\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleStartProcessing,\n        disabled: isUploading || uploadedFiles.length === 0 || !apiKey,\n        className: `px-6 py-3 rounded-md text-white font-medium ${isUploading || uploadedFiles.length === 0 || !apiKey ? 'bg-gray-400 cursor-not-allowed' : 'bg-blue-600 hover:bg-blue-700'}`,\n        children: \"Start Caption Generation\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-8 bg-blue-50 p-4 rounded-md\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-medium text-blue-800 mb-2\",\n        children: \"How it works\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n        className: \"list-decimal list-inside text-sm text-blue-700 space-y-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"Upload your images (individual files or a folder)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"Enter your OpenAI API key (required for GPT-4 Turbo access)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"Add any global tags you want included in all captions (optional)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"Click \\\"Start Caption Generation\\\" to begin processing\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"Wait for the AI to generate detailed captions for your images\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"Download the resulting caption files for use in LoRA training\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 164,\n    columnNumber: 5\n  }, this);\n};\n_s(UploadPage, \"RWgIjBWqOSMy4Nghkpwqf7PxmGA=\", false, function () {\n  return [useNavigate, useDropzone];\n});\n_c = UploadPage;\nexport default UploadPage;\nvar _c;\n$RefreshReg$(_c, \"UploadPage\");","map":{"version":3,"names":["React","useContext","useState","useCallback","useEffect","useNavigate","useDropzone","toast","AppContext","jsxDEV","_jsxDEV","UploadPage","_s","sessionId","setSessionId","apiKey","setApiKey","globalTags","setGlobalTags","uploadedFiles","setUploadedFiles","setProcessingStatus","isUploading","setIsUploading","uploadProgress","setUploadProgress","folderMode","setFolderMode","navigate","onDrop","acceptedFiles","length","_data$files","formData","FormData","forEach","file","append","path","name","headers","response","fetch","method","body","ok","Error","statusText","data","json","prev","files","map","originalname","size","type","mimetype","success","error","console","message","getRootProps","getInputProps","isDragActive","accept","multiple","noClick","noDrag","noKeyboard","useFsAccessApi","webkitDirectory","preventDropOnDocument","handleApiKeyChange","e","target","value","handleGlobalTagsChange","handleStartProcessing","isProcessing","progress","totalFiles","processedFiles","errors","toggleFolderMode","timer","setTimeout","clearTimeout","className","children","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","id","onChange","placeholder","required","onClick","disabled","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","slice","index","startsWith","src","URL","createObjectURL","alt","title","_c","$RefreshReg$"],"sources":["C:/tagger/client/src/components/UploadPage.js"],"sourcesContent":["import React, { useContext, useState, useCallback, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useDropzone } from 'react-dropzone';\nimport { toast } from 'react-toastify';\nimport { AppContext } from '../App';\n\nconst UploadPage = () => {\n  const { \n    sessionId, \n    setSessionId, \n    apiKey, \n    setApiKey, \n    globalTags, \n    setGlobalTags, \n    uploadedFiles, \n    setUploadedFiles,\n    setProcessingStatus\n  } = useContext(AppContext);\n  \n  const [isUploading, setIsUploading] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [folderMode, setFolderMode] = useState(false);\n  const navigate = useNavigate();\n\n  // Handle file drop\n  const onDrop = useCallback(async (acceptedFiles) => {\n    if (acceptedFiles.length === 0) return;\n    \n    setIsUploading(true);\n    setUploadProgress(0);\n    \n    try {\n      // Create FormData object\n      const formData = new FormData();\n      \n      // Add files to FormData\n      if (folderMode) {\n        acceptedFiles.forEach(file => {\n          // Preserve folder structure in file names\n          formData.append('images', file, file.path || file.name);\n        });\n      } else {\n        acceptedFiles.forEach(file => {\n          formData.append('images', file);\n        });\n      }\n      \n      // Set up headers\n      const headers = {};\n      if (sessionId) {\n        headers['X-Session-ID'] = sessionId;\n      }\n      \n      // Upload files\n      const response = await fetch(`/api/upload/${folderMode ? 'folder' : 'multiple'}`, {\n        method: 'POST',\n        headers,\n        body: formData\n      });\n      \n      if (!response.ok) {\n        throw new Error(`Upload failed: ${response.statusText}`);\n      }\n      \n      const data = await response.json();\n      \n      // Update session ID if not set\n      if (!sessionId) {\n        setSessionId(data.sessionId);\n      }\n      \n      // Update uploaded files\n      setUploadedFiles(prev => [\n        ...prev,\n        ...(data.files || []).map(file => ({\n          name: file.originalname,\n          path: file.path,\n          size: file.size,\n          type: file.mimetype\n        }))\n      ]);\n      \n      toast.success(`Successfully uploaded ${data.files?.length || 0} files`);\n      \n    } catch (error) {\n      console.error('Error uploading files:', error);\n      toast.error(`Upload failed: ${error.message}`);\n    } finally {\n      setIsUploading(false);\n      setUploadProgress(100);\n    }\n  }, [sessionId, setSessionId, setUploadedFiles, folderMode]);\n  \n  // Configure dropzone\n  const { \n    getRootProps, \n    getInputProps, \n    isDragActive \n  } = useDropzone({ \n    onDrop,\n    accept: {\n      'image/*': ['.jpg', '.jpeg', '.png', '.gif', '.webp', '.bmp']\n    },\n    multiple: true,\n    noClick: isUploading,\n    noDrag: isUploading,\n    noKeyboard: isUploading,\n    useFsAccessApi: true,\n    webkitDirectory: folderMode,\n    preventDropOnDocument: true\n  });\n  \n  // Handle API key change\n  const handleApiKeyChange = (e) => {\n    setApiKey(e.target.value);\n  };\n  \n  // Handle global tags change\n  const handleGlobalTagsChange = (e) => {\n    setGlobalTags(e.target.value);\n  };\n  \n  // Start processing\n  const handleStartProcessing = () => {\n    if (!apiKey) {\n      toast.error('Please enter your OpenAI API key');\n      return;\n    }\n    \n    if (uploadedFiles.length === 0) {\n      toast.error('Please upload at least one image');\n      return;\n    }\n    \n    // Set processing status\n    setProcessingStatus({\n      isProcessing: true,\n      progress: 0,\n      totalFiles: uploadedFiles.length,\n      processedFiles: 0,\n      errors: []\n    });\n    \n    // Navigate to processing page\n    navigate('/processing');\n  };\n  \n  // Toggle folder mode\n  const toggleFolderMode = () => {\n    setFolderMode(!folderMode);\n  };\n  \n  // Reset upload progress after completion\n  useEffect(() => {\n    if (uploadProgress === 100) {\n      const timer = setTimeout(() => {\n        setUploadProgress(0);\n      }, 1000);\n      return () => clearTimeout(timer);\n    }\n  }, [uploadProgress]);\n\n  return (\n    <div className=\"max-w-4xl mx-auto\">\n      <h1 className=\"text-2xl font-bold text-gray-800 mb-6\">Upload Images for Caption Generation</h1>\n      \n      {/* API Key Input */}\n      <div className=\"mb-6\">\n        <label htmlFor=\"apiKey\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n          OpenAI API Key <span className=\"text-red-500\">*</span>\n        </label>\n        <input\n          type=\"password\"\n          id=\"apiKey\"\n          value={apiKey}\n          onChange={handleApiKeyChange}\n          placeholder=\"sk-...\"\n          className=\"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          required\n        />\n        <p className=\"mt-1 text-sm text-gray-500\">\n          Your API key is stored locally and never sent to our servers except when processing images.\n        </p>\n      </div>\n      \n      {/* Global Tags Input */}\n      <div className=\"mb-6\">\n        <label htmlFor=\"globalTags\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n          Global Tags (Optional)\n        </label>\n        <input\n          type=\"text\"\n          id=\"globalTags\"\n          value={globalTags}\n          onChange={handleGlobalTagsChange}\n          placeholder=\"high quality, detailed, best quality\"\n          className=\"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n        />\n        <p className=\"mt-1 text-sm text-gray-500\">\n          These tags will be added to all generated captions.\n        </p>\n      </div>\n      \n      {/* Upload Mode Toggle */}\n      <div className=\"mb-6 flex items-center\">\n        <button\n          onClick={toggleFolderMode}\n          className={`px-4 py-2 rounded-md mr-2 ${\n            !folderMode \n              ? 'bg-blue-600 text-white' \n              : 'bg-gray-200 text-gray-700'\n          }`}\n          disabled={isUploading || uploadedFiles.length > 0}\n        >\n          Upload Files\n        </button>\n        <button\n          onClick={toggleFolderMode}\n          className={`px-4 py-2 rounded-md ${\n            folderMode \n              ? 'bg-blue-600 text-white' \n              : 'bg-gray-200 text-gray-700'\n          }`}\n          disabled={isUploading || uploadedFiles.length > 0}\n        >\n          Upload Folder\n        </button>\n        <span className=\"ml-2 text-sm text-gray-500\">\n          {folderMode ? 'Folder structure will be preserved' : 'Upload individual files'}\n        </span>\n      </div>\n      \n      {/* File Dropzone */}\n      <div \n        {...getRootProps()} \n        className={`dropzone mb-6 ${isDragActive ? 'active' : ''} ${isUploading ? 'opacity-50 cursor-not-allowed' : ''}`}\n      >\n        <input {...getInputProps()} />\n        {isUploading ? (\n          <div className=\"text-center\">\n            <div className=\"spinner mx-auto mb-4\"></div>\n            <p>Uploading files... {uploadProgress}%</p>\n          </div>\n        ) : isDragActive ? (\n          <div className=\"text-center\">\n            <svg \n              xmlns=\"http://www.w3.org/2000/svg\" \n              className=\"h-12 w-12 text-blue-500 mx-auto mb-4\" \n              fill=\"none\" \n              viewBox=\"0 0 24 24\" \n              stroke=\"currentColor\"\n            >\n              <path \n                strokeLinecap=\"round\" \n                strokeLinejoin=\"round\" \n                strokeWidth={2} \n                d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\" \n              />\n            </svg>\n            <p className=\"text-lg font-medium text-blue-600\">Drop the files here...</p>\n          </div>\n        ) : (\n          <div className=\"text-center\">\n            <svg \n              xmlns=\"http://www.w3.org/2000/svg\" \n              className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" \n              fill=\"none\" \n              viewBox=\"0 0 24 24\" \n              stroke=\"currentColor\"\n            >\n              <path \n                strokeLinecap=\"round\" \n                strokeLinejoin=\"round\" \n                strokeWidth={2} \n                d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\" \n              />\n            </svg>\n            <p className=\"text-lg font-medium text-gray-700\">\n              {folderMode ? 'Click to select a folder or drag it here' : 'Click to select files or drag them here'}\n            </p>\n            <p className=\"text-sm text-gray-500 mt-1\">\n              Supported formats: JPG, PNG, GIF, WebP, BMP\n            </p>\n          </div>\n        )}\n      </div>\n      \n      {/* Uploaded Files Preview */}\n      {uploadedFiles.length > 0 && (\n        <div className=\"mb-6\">\n          <h2 className=\"text-lg font-medium text-gray-800 mb-2\">\n            Uploaded Files ({uploadedFiles.length})\n          </h2>\n          \n          {uploadedFiles.length <= 10 ? (\n            <div className=\"image-grid\">\n              {uploadedFiles.slice(0, 10).map((file, index) => (\n                <div key={index} className=\"border border-gray-200 rounded-md overflow-hidden\">\n                  {file.type.startsWith('image/') ? (\n                    <img \n                      src={file.path.startsWith('http') ? file.path : URL.createObjectURL(file)} \n                      alt={file.name}\n                      className=\"w-full h-32 object-cover\"\n                    />\n                  ) : (\n                    <div className=\"w-full h-32 bg-gray-100 flex items-center justify-center\">\n                      <span className=\"text-gray-500\">{file.name}</span>\n                    </div>\n                  )}\n                  <div className=\"p-2 text-xs truncate\" title={file.name}>\n                    {file.name}\n                  </div>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <div className=\"bg-gray-50 p-4 rounded-md\">\n              <p>{uploadedFiles.length} files uploaded</p>\n              <p className=\"text-sm text-gray-500\">\n                Showing preview for large uploads is disabled to improve performance\n              </p>\n            </div>\n          )}\n        </div>\n      )}\n      \n      {/* Start Processing Button */}\n      <div className=\"flex justify-center\">\n        <button\n          onClick={handleStartProcessing}\n          disabled={isUploading || uploadedFiles.length === 0 || !apiKey}\n          className={`px-6 py-3 rounded-md text-white font-medium ${\n            isUploading || uploadedFiles.length === 0 || !apiKey\n              ? 'bg-gray-400 cursor-not-allowed'\n              : 'bg-blue-600 hover:bg-blue-700'\n          }`}\n        >\n          Start Caption Generation\n        </button>\n      </div>\n      \n      {/* Help Text */}\n      <div className=\"mt-8 bg-blue-50 p-4 rounded-md\">\n        <h3 className=\"text-lg font-medium text-blue-800 mb-2\">How it works</h3>\n        <ol className=\"list-decimal list-inside text-sm text-blue-700 space-y-1\">\n          <li>Upload your images (individual files or a folder)</li>\n          <li>Enter your OpenAI API key (required for GPT-4 Turbo access)</li>\n          <li>Add any global tags you want included in all captions (optional)</li>\n          <li>Click \"Start Caption Generation\" to begin processing</li>\n          <li>Wait for the AI to generate detailed captions for your images</li>\n          <li>Download the resulting caption files for use in LoRA training</li>\n        </ol>\n      </div>\n    </div>\n  );\n};\n\nexport default UploadPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}